/**
 * Created by michaelz on 7/6/2016.
 */

// Dummy BookReader class for IA script. I stripped out
// all of the code for BookReader since I'm only interested in the page numbers
// original source: http://github.com/openlibrary/bookreader/
// Note, the script generated by BookReaderJSLocate.php will create a variable "br"
// which we use to access the page numbers.
// We create the "br" variable here to avoid errors such as
// "Uncaught ReferenceError: br is not defined" if the IA script fails for some reason.
var br;
function BookReader() {};
BookReader.prototype.init = function() { return true;}

function getBookReader() { return br;};

function getInternetArchiveJS(bookid, callback){
  // The URL in the script tag below is dynamically generated JavaScript that includes the book metadata and page image access functions.
  // The ia{number}.us.archive.org server for the book can and does change, so this URL should NOT be used for permanent access.
  // Use the JSLocate URL below instead for stable access - it will find the item and redirect to the correct server

  $.getScript('http://archive.org/bookreader/BookReaderJSLocate.php?id=' + bookid + '&subPrefix=' + bookid)
          .done(function (script, textStatus) {
            callback();
          })
          .fail(function (jqxhr, settings, exception) {
            console.log(jqxhr.statusText + ' : ' + jqxhr.status);
            callback();
          });

}